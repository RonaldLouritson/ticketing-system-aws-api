<!DOCTYPE html>
<html>
  <head>
    <title>ticketing System AWS API</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <!-- Bootstrap JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <!-- Ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div class="header">
        <img src="image/logo.png" height="50px" width="50px">
        <a href="index.html" class="logo">Ticketing System</a>
        <div class="header-right">
          <a href="" class=sel>Student Drop/Collect</a>
          <a href="" class=sel>Admin Drop/Collect</a>
          <a href="index.html" class=sel>All Tickets</a>
          <a href="" class=sel>Pending Tickets</a>
          <a href="newtask.html" class=sel>Create New Ticket</a>
        </div>
    </div>
    <div class="container">
        <br>
        <form action="" method="post">
            <div class="ticket">
                <table class="styled-table">
                <h2> Create New Ticket <input type="submit" value="Save" class="sel header-right"></h2>
                <tbody>
                    <tr>
                        <td>Title</td>
                        <td><input type="text" id="ftitle" name="ftitle"></td>
                    </tr>
                    <tr>
                        <td>Email</td>
                        <td><input type="email" id="femail" name="femail"></td>
                    </tr>
                    <tr>
                        <td>Mobile No</td>
                        <td><input type="number" id="fmobileno" name="fmobileno"></td>
                    </tr>
                    <tr>
                        <td>Status</td>
                        <td><select id="fstatus" name="fstatus" autocomplete="fstatus"></select></td>
                    </tr>
                    <tr>
                        <td>Description</td>
                        <td><textarea type="text" id="fdesc" name="fdesc" rows="4" cols="50"></textarea></td>
                    </tr>
                    <tr>
                        <td>Locker</td>
                        <td><select id="flockerno" name="flockerno" autocomplete="flockerno"></select></td>
                    </tr>
                </tbody>
                </table>
            </div>
        </form>
    </div>
  </body>
<script>
    $(document).ready(function() {
       
        //Fetch data status
        statusData();
        lockerData();
    });
</script>

<script>
    //Function to call API Endpoint and Populate All Data
    function statusData(){

    var API_URL = "https://cpwyb4u4pc.execute-api.ap-southeast-1.amazonaws.com/dev"

    $.ajax({
        type: "GET",
        url: API_URL,
        success: function (data) {     
            if(data != '' && data != null) {
                            
                //$("#fstatus").append('<option></option>');
                for (i in data.data.Items) {
                    $("#fstatus").append('<option>' + data.data.Items[i]['status'] + '</option>');
                }
            } else {

            }
        },
        error: function (error_response) {
            console.log(error_response)
        },
    });

    }

    function lockerData(){

    var API_URL = "https://ldph8cwfyl.execute-api.ap-southeast-1.amazonaws.com/dev"

    $.ajax({
        type: "GET",
        url: API_URL,
        success: function (data) {     
            if(data != '' && data != null) {
                            
                //$("#flockerno").append('<option></option>');
                for (i in data.data.Items) {
                    $("#flockerno").append('<option>' + data.data.Items[i]['locker_no'] + '</option>');
                }
            } else {

            }
        },
        error: function (error_response) {
            console.log(error_response)
        },
    });

    }
</script>
</html>
